<!DOCTYPE html>
<html lang="en">
    <head>
        <script src="https://cdn.quilljs.com/1.3.7/quill.js"></script>
        <!--<script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>-->
        <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link href="style.css" rel="stylesheet" type="text/css" />
        <title>Document</title>
    </head>
    <body>

        <div id="window">
        </div>

        <div>
            <button class="del" onclick="window.location.href='mainWindow.html'">revenir</button>
        </div>

        <script>
                // get values from bibli.json an put in an array
                var fs = require('fs');
                var currentEditor; // selected / focused editor

                let save = fs.readFileSync('save/editor.json'); // synchronous to load configuration before executing any code, asynchronous dont work
                let array = JSON.parse(save);

                draw(array);

                function draw(array){

                    for(i = 0; i < array.length; i++){

                    $("#window").append('<div><span id="editor' + i + '">' + array[i] + '</span><button id="edit' + i + '"class="del"><i class="fa fa-edit"></i></button><button id="remove' + i + '"class="del" onclick="removes(' + i + ')"><i class="fa fa-remove"></i></button><button id="trash' + i + '"class="del"><i class="fa fa-trash"></i></button></div>');
                    createEditor("#editor" + i);

                    }
                }



            function createEditor(selector) // https://github.com/quilljs/quill/issues/633
            {
                let quill = new Quill(selector, {
                    modules: {
                    toolbar: false
                }, });
                
                quill.on("editor-change", (eventName, ...args) =>
                {
                    currentEditor = quill;
                });
            }

            function removes(current) {
                console.log(array);
                array.splice(current,1)
                console.log(array);
                fs.writeFileSync('save/editor.json', JSON.stringify(array))
                window.location.reload();
            }
        </script>
    </body>
</html>